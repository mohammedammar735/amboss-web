<script>
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert("Copied: " + text);
        });
    }

    function createAccount() {
        document.getElementById("output").innerText = "â³ Creating account...";
        fetch("/create_account", { method: "POST" })
            .then(response => response.json())
            .then(data => {
                const lines = (data.output || "").split("\n");
                const emailLine = lines.find(l => l.includes("ğŸ“§ Email"));
                const passLine = lines.find(l => l.includes("ğŸ” Password"));

                if (emailLine && passLine) {
                    const email = emailLine.split(": ")[1];
                    const password = passLine.split(": ")[1];

                    document.getElementById("output").innerHTML = `
                        âœ… Account created!<br><br>
                        ğŸ“§ Email: <b style='cursor:pointer' onclick="copyToClipboard('${email}')">${email}</b><br>
                        ğŸ” Password: <b style='cursor:pointer' onclick="copyToClipboard('${password}')">${password}</b>
                    `;
                } else {
                    document.getElementById("output").innerText = data.error || "âŒ Failed to read account info. Try again.";
                }
            })
            .catch(error => {
                document.getElementById("output").innerText = "âŒ Error: " + error;
            });
    }
</script>
